(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[4],{450:function(e,t,a){e.exports={ChatMessage:"ChatMessages_ChatMessage__CGud8",ChatMessages:"ChatMessages_ChatMessages__HLpx4",CheckBox:"ChatMessages_CheckBox__2wX44"}},451:function(e,t,a){e.exports={ChatInput:"ChatInput_ChatInput__3aZis"}},455:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(40),c=a(450),l=a.n(c),u=a(419),o=a(170),m=a(27),i=function(e){var t=e.MessagesArray,a=Object(n.useState)(!0),c=Object(s.a)(a,2),u=c[0],o=c[1],m=Object(n.useRef)(null);return Object(n.useEffect)((function(){var e;u&&(null===(e=m.current)||void 0===e||e.scrollIntoView({behavior:"smooth"}))}),[t,u]),r.a.createElement("div",null,r.a.createElement("div",{className:l.a.ChatMessages,onScroll:function(e){var t=e.currentTarget;Math.abs(t.scrollHeight-t.scrollTop-t.clientHeight)<=20?!u&&o(!0):u&&o(!1)}},t.map((function(e){return r.a.createElement(E,{userId:e.userId,photo:e.photo,userName:e.userName,message:e.message,key:e.id})})),r.a.createElement("div",{ref:m})))},E=r.a.memo((function(e){var t=e.photo,a=e.userName,n=e.message,s=e.userId,c="/profile/".concat(s);return r.a.createElement("div",{className:l.a.ChatMessage},r.a.createElement(u.a,{avatar:r.a.createElement(m.b,{to:c}," ",r.a.createElement(o.a,{src:t})," "),author:r.a.createElement(m.b,{to:""},r.a.createElement("span",null,a)),content:r.a.createElement("p",null,n)}))})),h=a(424),p=a(433),d=a(421),f=a(45),g=a(102),b=a(451),C=a.n(b),O={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"defs",attrs:{},children:[{tag:"style",attrs:{}}]},{tag:"path",attrs:{d:"M931.4 498.9L94.9 79.5c-3.4-1.7-7.3-2.1-11-1.2a15.99 15.99 0 00-11.7 19.3l86.2 352.2c1.3 5.3 5.2 9.6 10.4 11.3l147.7 50.7-147.6 50.7c-5.2 1.8-9.1 6-10.3 11.3L72.2 926.5c-.9 3.7-.5 7.6 1.2 10.9 3.9 7.9 13.5 11.1 21.5 7.2l836.5-417c3.1-1.5 5.6-4.1 7.2-7.1 3.9-8 .7-17.6-7.2-21.6zM170.8 826.3l50.3-205.6 295.2-101.3c2.3-.8 4.2-2.6 5-5 1.4-4.2-.8-8.7-5-10.2L221.1 403 171 198.2l628 314.9-628.2 313.2z"}}]},name:"send",theme:"outlined"},v=a(8),M=function(e,t){return n.createElement(v.a,Object.assign({},e,{ref:t,icon:O}))};M.displayName="SendOutlined";var j=n.forwardRef(M),I=a(15),y=a(195),S=function(e){var t=e.WSStatus,a=Object(I.c)(),n=d.a.useForm(),c=Object(s.a)(n,1)[0];return r.a.createElement(d.a,{className:C.a.ChatInput,name:"ChatInput",onFinish:function(e){a(Object(y.a)(e.ChatInputEnterMessage)),c.resetFields()},form:c},r.a.createElement(d.a.Item,{name:"ChatInputEnterMessage",rules:[{required:!0,message:"Please input message!"}]},r.a.createElement(g.a,{allowClear:!0,placeholder:"Enter your message..."})),r.a.createElement(d.a.Item,null,r.a.createElement(f.a,{disabled:"OPENED"!==t,htmlType:"submit",icon:r.a.createElement(j,null)})))},_=a(76),N=a(77),w=function(){var e=Object(I.c)(),t=Object(I.d)((function(e){return e.Chat.ChatMessages})),a=Object(I.d)((function(e){return e.Chat.WSStatus}));switch(Object(n.useEffect)((function(){return e(Object(y.b)()),e(Object(y.c)()),function(){e(Object(y.d)()),e(Object(y.e)())}}),[e]),a){case"CLOSED":return r.a.createElement("div",{style:{color:"red"}},r.a.createElement(_.a,null),r.a.createElement("b",null,"Try to connect"));case"OPENED":return r.a.createElement(r.a.Fragment,null,r.a.createElement(i,{MessagesArray:t}),r.a.createElement(S,{WSStatus:a}));case"ERROR":return r.a.createElement("div",{style:{color:"red"}},"SOME ERROR",r.a.createElement("p",null,"Please refresh the page"));case"PENDING":return r.a.createElement(_.a,null)}};t.default=Object(N.a)((function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(h.a,{title:r.a.createElement(r.a.Fragment,null,"Common chat with WebSocket!! ",r.a.createElement(p.a,null))}),r.a.createElement(w,null))}))}}]);
//# sourceMappingURL=4.8e3dfdd8.chunk.js.map